@model WebApplication4.Models.helper.TicketIndex

@{
    ViewBag.Title = "Index";
    var title = Model.tickets.FirstOrDefault();
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>
<table id="table1">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(x => title.Id)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.Title)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.Created)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.TicketPriority)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.TicketStatus)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.Description)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.Owner)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.Assigned)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.Project)
            </th>
            <th>
                @Html.DisplayNameFor(x => title.TicketType)
            </th>
        </tr>
            @foreach (var item in Model.tickets)
            {
                var checkit = Model.helper.UserisOwnerorAssigned(item.Id, Model.accessin);
                if (checkit != null)
                {
                    if (User.IsInRole("Admin") || checkit.ownerconfirmed || checkit.isinproject || checkit.assignconfirmed)
                    {
                    <tr>
                        <td>
                            @Html.DisplayFor(x => item.Id)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.Title)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.Created)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.TicketPriority.Priority)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.TicketStatus.Status)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.Owner.UserName)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.Assigned.UserName)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.Project.Project)
                        </td>
                        <td>
                            @Html.DisplayFor(x => item.TicketType.Type)
                        </td>
                    </tr>
                    }
                }
            }
    </thead>
</table>

@section scripts{
    <script>
    $(document).ready(function(){
        $("#table1").DataTable();})
    </script>
}